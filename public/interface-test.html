<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <title>Interface Comprehensive Test</title>
    <link rel="stylesheet" href="/styles-neon.css">
    <style>
        body { padding: 20px; background: #111; }
        .test-section { 
            margin: 20px 0; 
            padding: 20px; 
            border: 1px solid #555; 
            border-radius: 8px;
        }
        .test-button {
            margin: 5px;
            padding: 10px 15px;
            background: #a855f7;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        .test-button:hover { background: #9333ea; }
        .test-result {
            background: #1a1a1a;
            color: #00ff00;
            padding: 10px;
            border-radius: 5px;
            font-family: monospace;
            margin: 10px 0;
        }
        .error { color: #ff4444; }
        .success { color: #00ff88; }
    </style>
</head>
<body>
    <!-- Minimal required elements -->
    <div id="login-screen" style="display: none;"></div>
    <div id="app-container" style="display: block;">
    
        <h1>üß™ Comprehensive Interface Test</h1>
        
        <div class="test-section">
            <h2>Test 1: Basic Button Functionality</h2>
            <button id="new-client-btn" class="test-button">New Client (ID)</button>
            <button id="start-analysis-btn" class="test-button">Start Analysis (ID)</button>
            <button id="save-client-btn" class="test-button">Save Client (ID)</button>
            <button id="welcome-new-client" class="test-button">Welcome New Client (ID)</button>
            <div class="test-result" id="button-test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>Test 2: View Control Buttons</h2>
            <button id="list-view" class="test-button">List View</button>
            <button id="text-view" class="test-button">Text View</button>
            <button id="filter-view" class="test-button">Filter View</button>
            <div class="test-result" id="view-test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>Test 3: Data-Action Elements</h2>
            <button data-action="select-client" data-id="test1" class="test-button">Select Client (data-action)</button>
            <button data-action="delete-client" data-id="test2" class="test-button">Delete Client (data-action)</button>
            <button data-action="load-analysis" data-id="test3" class="test-button">Load Analysis (data-action)</button>
            <div class="test-result" id="data-action-test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>Test 4: TeamPulseDebug Functions</h2>
            <button onclick="testDebugFunctions()" class="test-button">Test All Debug Functions</button>
            <div class="test-result" id="debug-test-result"></div>
        </div>
        
        <div class="test-section">
            <h2>Test 5: Form Elements</h2>
            <textarea id="negotiation-text" rows="3" cols="50" placeholder="Test text input"></textarea><br>
            <input type="text" id="company" placeholder="Company name"><br>
            <input type="text" id="negotiator" placeholder="Negotiator name"><br>
            <div class="test-result" id="form-test-result"></div>
        </div>
        
        <!-- Required system elements -->
        <div id="client-form" style="display: none;"></div>
        <div id="client-form-title"></div>
        <div id="analysis-dashboard" style="display: none;"></div>
        <div id="results-section" style="display: none;"></div>
        <div id="notifications"></div>
        <div id="sidebar-left"></div>
        <div id="sidebar-right"></div>
        <div id="main-content"></div>
        <div id="client-list"></div>
        <div id="highlights-list"></div>
        <div id="fulltext-content"></div>
        <div id="welcome-screen"></div>
    
    </div>
    
    <script>
        // Authentication simulation
        sessionStorage.setItem('teampulse-auth', 'true');
        
        // Result logging function
        function logResult(elementId, message, isError = false) {
            const element = document.getElementById(elementId);
            const timestamp = new Date().toLocaleTimeString();
            const statusClass = isError ? 'error' : 'success';
            const statusIcon = isError ? '‚ùå' : '‚úÖ';
            element.innerHTML += `<div class="${statusClass}">${statusIcon} [${timestamp}] ${message}</div>`;
        }
        
        // Test 4: Debug Functions
        function testDebugFunctions() {
            const resultId = 'debug-test-result';
            logResult(resultId, 'Starting TeamPulseDebug tests...');
            
            if (!window.TeamPulseDebug) {
                logResult(resultId, 'TeamPulseDebug NOT available', true);
                return;
            }
            
            logResult(resultId, `TeamPulseDebug available with: ${Object.keys(window.TeamPulseDebug).join(', ')}`);
            
            // Test each function
            const functions = [
                'showClientForm',
                'startAnalysis', 
                'saveClient',
                'switchHighlightsView',
                'toggleSidebar',
                'toggleMobileMenu'
            ];
            
            functions.forEach(funcName => {
                try {
                    if (typeof window.TeamPulseDebug[funcName] === 'function') {
                        logResult(resultId, `${funcName}: Available ‚úì`);
                        
                        // Try to call safe functions
                        if (funcName === 'switchHighlightsView') {
                            window.TeamPulseDebug[funcName]('list');
                            logResult(resultId, `${funcName}('list'): Called successfully`);
                        } else if (funcName === 'toggleSidebar' || funcName === 'toggleMobileMenu') {
                            // These are safe to call
                            window.TeamPulseDebug[funcName]();
                            logResult(resultId, `${funcName}(): Called successfully`);
                        }
                    } else {
                        logResult(resultId, `${funcName}: NOT a function`, true);
                    }
                } catch (error) {
                    logResult(resultId, `${funcName}: Error - ${error.message}`, true);
                }
            });
        }
        
        // Wait for scripts to load then run tests
        setTimeout(() => {
            logResult('button-test-result', 'Testing button event listeners...');
            
            // Test ID-based buttons
            ['new-client-btn', 'start-analysis-btn', 'save-client-btn', 'welcome-new-client'].forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (btn) {
                    logResult('button-test-result', `${btnId}: Element found ‚úì`);
                    
                    // Add manual click test
                    btn.addEventListener('click', () => {
                        logResult('button-test-result', `${btnId}: Manual click event fired!`);
                    });
                } else {
                    logResult('button-test-result', `${btnId}: Element NOT found`, true);
                }
            });
            
            // Test view controls
            ['list-view', 'text-view', 'filter-view'].forEach(btnId => {
                const btn = document.getElementById(btnId);
                if (btn) {
                    logResult('view-test-result', `${btnId}: Element found ‚úì`);
                    btn.addEventListener('click', () => {
                        logResult('view-test-result', `${btnId}: Manual click event fired!`);
                    });
                } else {
                    logResult('view-test-result', `${btnId}: Element NOT found`, true);
                }
            });
            
            // Test data-action elements
            document.querySelectorAll('[data-action]').forEach(element => {
                const action = element.getAttribute('data-action');
                const id = element.getAttribute('data-id');
                logResult('data-action-test-result', `data-action="${action}" data-id="${id}": Found ‚úì`);
                
                element.addEventListener('click', () => {
                    logResult('data-action-test-result', `data-action="${action}": Manual click event fired!`);
                });
            });
            
            // Test form elements
            const formElements = ['negotiation-text', 'company', 'negotiator'];
            formElements.forEach(elemId => {
                const elem = document.getElementById(elemId);
                if (elem) {
                    logResult('form-test-result', `${elemId}: Element found ‚úì`);
                    elem.addEventListener('input', () => {
                        logResult('form-test-result', `${elemId}: Input event fired with value: "${elem.value}"`);
                    });
                } else {
                    logResult('form-test-result', `${elemId}: Element NOT found`, true);
                }
            });
            
            logResult('button-test-result', 'Manual event listeners added. Try clicking buttons!');
            logResult('view-test-result', 'Manual event listeners added. Try clicking buttons!');
            logResult('data-action-test-result', 'Manual event listeners added. Try clicking buttons!');
            logResult('form-test-result', 'Manual event listeners added. Try typing in inputs!');
            
        }, 3000); // Wait 3 seconds for all scripts to load
    </script>
    
    <script src="/auth.js"></script>
    <script src="/app-neon.js"></script>
    <script src="/fix-test.js"></script>
</body>
</html>